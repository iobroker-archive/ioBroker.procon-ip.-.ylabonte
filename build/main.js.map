{
  "version": 3,
  "sources": ["../src/main.ts"],
  "sourcesContent": ["import { Adapter, AdapterOptions } from '@iobroker/adapter-core';\nimport {\n    CommandService,\n    IServiceConfig,\n    GetStateService,\n    IGetStateServiceConfig,\n    UsrcfgCgiService,\n    RelayDataInterpreter,\n    GetStateCategory,\n    GetStateData,\n    GetStateDataSysInfo,\n    GetStateDataObject,\n    SetStateService,\n} from 'procon-ip';\n\n// Augment the adapter.config object with the actual types\ndeclare global {\n    // eslint-disable-next-line @typescript-eslint/no-namespace\n    namespace ioBroker {\n        interface AdapterConfig {\n            controllerUrl: string;\n            basicAuth: boolean;\n            username: string;\n            password: string;\n            updateInterval: number;\n            requestTimeout: number;\n            errorTolerance: number;\n        }\n    }\n}\n\nclass ProconIp extends Adapter {\n    private _relayDataInterpreter!: RelayDataInterpreter;\n    private _getStateService!: GetStateService;\n    private _setStateService!: SetStateService;\n    private _usrcfgCgiService!: UsrcfgCgiService;\n    private _commandService!: CommandService;\n    private _forceUpdate: number[];\n    private _stateData: GetStateData;\n    private _bootstrapped = false;\n    private _objectStateFields = ['value', 'category', 'label', 'unit', 'displayValue', 'active'];\n    private _timeout: NodeJS.Timeout | null = null;\n\n    public constructor(options: Partial<AdapterOptions> = {}) {\n        super({\n            ...options,\n            name: 'procon-ip',\n        });\n        this.on('ready', this.onReady.bind(this));\n        this.on('unload', this.onUnload.bind(this));\n        this.on('stateChange', this.onStateChange.bind(this));\n        this._forceUpdate = new Array<number>();\n        this._stateData = new GetStateData();\n    }\n\n    /**\n     * Is called when databases are connected and adapter received configuration.\n     */\n    private async onReady(): Promise<void> {\n        let connectionApproved = false;\n        await this.setState('info.connection', false, true);\n\n        if (this.config.controllerUrl.length < 1 || !ProconIp.isValidURL(this.config.controllerUrl)) {\n            this.log.warn(`Invalid controller URL ('${this.config.controllerUrl}') supplied.`);\n            return;\n        }\n\n        const serviceConfig = Object.defineProperties(Object.create(this.config), {\n            baseUrl: {\n                value: this.config.controllerUrl,\n                writable: true,\n            },\n            timeout: {\n                value: this.config.requestTimeout,\n                writable: true,\n            },\n        }) as IServiceConfig;\n        this._relayDataInterpreter = new RelayDataInterpreter(this.log);\n        this._getStateService = new GetStateService(serviceConfig as IGetStateServiceConfig, this.log);\n        this._setStateService = new SetStateService(serviceConfig, this.log);\n        this._usrcfgCgiService = new UsrcfgCgiService(serviceConfig, this.log, this._getStateService,\n            this._relayDataInterpreter);\n        this._commandService = new CommandService(serviceConfig, this.log);\n\n        this.log.debug(`GetStateService url: ${this._getStateService.url}`);\n        this.log.debug(`UsrcfgCgiService url: ${this._usrcfgCgiService.url}`);\n\n        await this._getStateService.update().then(async (data) => {\n            this._stateData = data;\n\n            // Set objects once on startup\n            if (!this._bootstrapped) {\n                this.log.debug(`Initially setting adapter objects`);\n                await this.setSysInfoObjectsNotExists(data.sysInfo);\n                await this.setStateDataObjectsNotExists(data.objects);\n            }\n        });\n\n        this._timeout = setTimeout(() => {\n            // Start the actual service\n            this._getStateService.start(\n                (data: GetStateData) => {\n                    this.log.silly(`Start processing new GetState.csv`);\n                    connectionApproved = true;\n\n                    // Set sys info states\n                    data.sysInfo.toArrayOfObjects().forEach((info) => {\n                        // Only update when value has changed\n                        if (!this._bootstrapped || info.value !== this._stateData.sysInfo[info.key]) {\n                            this.log.debug(`Updating sys info state ${info.key}: ${info.value}`);\n                            this.setStateAsync(\n                                `${this.name}.${this.instance}.info.system.${info.key}`,\n                                info.value.toString(),\n                                true,\n                            ).catch((e) => {\n                                this.log.error(`Failed setting state for '${info.key}': ${e}`);\n                            });\n                        }\n                    });\n\n                    this.updateAdvancedSysInfoStates(data.sysInfo);\n\n                    // Set actual sensor and actor/relay object states\n                    data.objects.forEach((obj) => {\n                        this.log.silly(\n                            `Comparing previous and current value (${obj.displayValue}) for '${obj.label}' (${obj.category})`,\n                        );\n                        this.log.silly(\n                            `this._stateData.getDataObject(obj.id).value: ${\n                                this._stateData.getDataObject(obj.id).value\n                            }`,\n                        );\n                        this.log.silly(`obj.value: ${obj.value}`);\n\n                        // Only update when value has changed or update is forced (on state change)\n                        const forceObjStateUpdate = this._forceUpdate.indexOf(obj.id);\n                        if (\n                            !this._bootstrapped ||\n                            forceObjStateUpdate >= 0 ||\n                            (this._stateData.getDataObject(obj.id) &&\n                                this._stateData.getDataObject(obj.id).value != obj.value)\n                        ) {\n                            if (this._stateData.getDataObject(obj.id).label != obj.label) {\n                                this.log.debug(`Updating label for '${obj.label}' (${obj.category})`);\n                                this.updateObjectCommonName(obj).catch((e: unknown) => {\n                                    if (e instanceof Error) {\n                                        this.log.error(`Failed fixing label for '${obj.label}': ${e.message}`);\n                                    } else {\n                                        this.log.error(`Failed fixing label for '${obj.label}': ${String(e)}`);\n                                    }\n                                });\n                            }\n                            this.log.debug(`Updating value for '${obj.label}' (${obj.category})`);\n                            this.setDataState(obj);\n                            if (this._forceUpdate[forceObjStateUpdate]) {\n                                this._forceUpdate.splice(forceObjStateUpdate, 1);\n                            }\n                        }\n                    });\n\n                    this.log.silly(`Updating data object for next comparison`);\n                    this._stateData = data;\n                    this._bootstrapped = true;\n                    this.setState('info.connection', true, true).catch(() => {});\n                },\n                (e: unknown) => {\n                    this.setState('info.connection', false, true).catch(() => {});\n                    if (!connectionApproved) {\n                        if (e instanceof Error) {\n                            this.log.error(`Could not connect to the controller: ${e.message}`);\n                        } else {\n                            this.log.error(`Could not connect to the controller: ${String(e)}`);\n                        }\n                        this._getStateService?.stop();\n                    }\n                },\n            );\n        }, 300);\n\n        this.subscribeStates(`${this.name}.${this.instance}.relays.*`);\n        this.subscribeStates(`${this.name}.${this.instance}.externalRelays.*`);\n    }\n\n    // Is called when adapter shuts down - callback has to be called under any circumstances!\n    private onUnload(callback: () => void): void {\n        try {\n            // Stop the service loop (this also handles the info.connection state)\n            this._getStateService?.stop();\n            this.setState('info.connection', false, true).catch(() => {});\n        } catch (e: unknown) {\n            this.log.error(`Failed to stop GetState service: ${String(e)}`);\n        } finally {\n            if (this._timeout) {\n                clearTimeout(this._timeout);\n            }\n            callback();\n        }\n    }\n\n    // Is called if a subscribed state changes\n    private onStateChange(id: string, state: ioBroker.State | null | undefined): void {\n        if (!state) {\n            // The state was deleted\n            this.log.info(`state ${id} deleted`);\n            return;\n        }\n        if (state.ack) {\n            // The state is already acknowledged -> no need to change anything\n            return;\n        }\n\n        if (id.endsWith('.auto')) {\n            this.relayToggleAuto(id, state).catch((e) => {\n                this.log.error(`Error on relay toggle (${id}): ${e}`);\n            });\n        } else if (id.endsWith('.onOff')) {\n            this.relayToggleOnOff(id, state).catch((e) => {\n                this.log.error(`Error on relay toggle (${id}): ${e}`);\n            });\n        } else if (id.endsWith('.dosageTimer')) {\n            this.setDosageTimer(id, state).catch((e) => {\n                this.log.error(`Error on manual dosage (${id}): ${e}`);\n            });\n        } else if (id.endsWith('.timer')) {\n            this.setRelayTimer(id, state).catch((e) => {\n                this.log.error(`Error on relay timer (${id}): ${e}`);\n            });\n        }\n    }\n\n    private async relayToggleAuto(objectId: string, state: ioBroker.State): Promise<number> {\n        const onOffState = await this.getStateAsync(objectId.replace(/\\.auto$/, '.onOff'));\n        if (!onOffState) {\n            throw new Error(`Cannot get onOff state to toggle '${objectId}'`);\n        }\n\n        const obj = await this.getObjectAsync(objectId);\n        if (!obj) {\n            throw new Error(`Cannot handle state change for non-existent object '${objectId}'`);\n        }\n\n        const getStateDataObject: GetStateDataObject = this._stateData.getDataObject(Number(obj.native.id));\n        this._forceUpdate.push(getStateDataObject.id);\n        try {\n            if (state.val) {\n                this.log.info(`Switching ${obj.native.label}: auto`);\n                return this._usrcfgCgiService.setAuto(getStateDataObject);\n            } else if (onOffState.val) {\n                this.log.info(`Switching ${obj.native.label}: on`);\n                return this._usrcfgCgiService.setOn(getStateDataObject);\n            } else {\n                this.log.info(`Switching ${obj.native.label}: off`);\n                return this._usrcfgCgiService.setOff(getStateDataObject);\n            }\n        } catch (e: unknown) {\n            if (e instanceof Error) {\n                this.log.error(`Error on switching operation: ${e.message}`);\n            } else {\n                this.log.error(`Error on switching operation: ${String(e)}`);\n            }\n\n            return -1;\n        }\n    }\n\n    private async relayToggleOnOff(objectId: string, state: ioBroker.State): Promise<void> {\n        const obj = await this.getObjectAsync(objectId);\n        if (!obj) {\n            throw new Error(`Cannot handle state change for non-existent object '${objectId}'`);\n        }\n\n        const getStateDataObject: GetStateDataObject = this._stateData.getDataObject(Number(obj.native.id));\n        this._forceUpdate.push(getStateDataObject.id);\n        try {\n            if (state.val) {\n                this.log.info(`Switching ${obj.native.label}: on`);\n                await this._usrcfgCgiService.setOn(getStateDataObject);\n            } else {\n                this.log.info(`Switching ${obj.native.label}: off`);\n                await this._usrcfgCgiService.setOff(getStateDataObject);\n            }\n        } catch (e: unknown) {\n            if (e instanceof Error) {\n                this.log.error(`Error on switching operation: ${e.message}`);\n            } else {\n                this.log.error(`Error on switching operation: ${String(e)}`);\n            }\n        }\n    }\n\n    private async setDosageTimer(objectId: string, state: ioBroker.State): Promise<void> {\n        const obj = await this.getObjectAsync(objectId);\n        if (!obj) {\n            throw new Error(`Cannot handle state change for non-existent object '${objectId}'`);\n        }\n\n        const getStateDataObject: GetStateDataObject = this._stateData.getDataObject(Number(obj.native.id));\n        const relayId =\n            getStateDataObject.categoryId + (getStateDataObject.category === String(GetStateCategory.EXTERNAL_RELAYS) ? 8 : 0);\n        this._forceUpdate.push(getStateDataObject.id);\n        try {\n            const stateValNumber = state.val as number;\n            if (relayId === this._stateData.getChlorineDosageControlId()) {\n                await this._commandService.setChlorineDosage(stateValNumber);\n            } else if (relayId === this._stateData.getPhMinusDosageControlId()) {\n                await this._commandService.setPhMinusDosage(stateValNumber);\n            } else if (relayId === this._stateData.getPhPlusDosageControlId()) {\n                await this._commandService.setPhPlusDosage(stateValNumber);\n            }\n            this.log.info(`Setting dosage timer ${obj.native.label} for ${state.val} seconds`);\n        } catch (e: unknown) {\n            if (e instanceof Error) {\n                this.log.error(`Error setting dosage timer: ${e.message}`);\n            } else {\n                this.log.error(`Error setting dosage timer: ${String(e)}`);\n            }\n        }\n    }\n\n    private async setRelayTimer(objectId: string, state: ioBroker.State): Promise<void> {\n        const obj = await this.getObjectAsync(objectId);\n        if (!obj) {\n            throw new Error(`Cannot handle state change for non-existent object '${objectId}'`);\n        }\n\n        const getStateDataObject: GetStateDataObject = this._stateData.getDataObject(Number(obj.native.id));\n        const relayId =\n            getStateDataObject.categoryId + (getStateDataObject.category === String(GetStateCategory.EXTERNAL_RELAYS) ? 9 : 1);\n        this._forceUpdate.push(getStateDataObject.id);\n        try {\n            const stateValNumber = state.val as number;\n            await this._setStateService.setTimer(relayId, stateValNumber);\n            this.log.info(`Setting timer for ${obj.native.label} to ${state.val} seconds`);\n        } catch (e: unknown) {\n            if (e instanceof Error) {\n                this.log.error(`Error setting relay timer: ${e.message}`);\n            } else {\n                this.log.error(`Error setting relay timer: ${String(e)}`);\n            }\n        }\n    }\n\n    private updateAdvancedSysInfoStates(sysInfo: GetStateDataSysInfo): void {\n        if (!this._bootstrapped || sysInfo.dosageControl !== this._stateData.sysInfo.dosageControl) {\n            this.log.debug('Updating advanced sys info states');\n            this.setStateAsync(\n                `${this.name}.${this.instance}.info.system.phPlusDosageEnabled`,\n                sysInfo.isPhPlusDosageEnabled(),\n                true,\n            ).catch((e) => {\n                this.log.error(\n                    `Failed setting state for '${this.name}.${this.instance}.info.system.phPlusDosageEnabled': ${e}`,\n                );\n            });\n            this.setStateAsync(\n                `${this.name}.${this.instance}.info.system.phMinusDosageEnabled`,\n                sysInfo.isPhMinusDosageEnabled(),\n                true,\n            ).catch((e) => {\n                this.log.error(\n                    `Failed setting state for '${this.name}.${this.instance}.info.system.phMinusDosageEnabled': ${e}`,\n                );\n            });\n            this.setStateAsync(\n                `${this.name}.${this.instance}.info.system.chlorineDosageEnabled`,\n                sysInfo.isChlorineDosageEnabled(),\n                true,\n            ).catch((e) => {\n                this.log.error(\n                    `Failed setting state for '${this.name}.${this.instance}.info.system.chlorineDosageEnabled': ${e}`,\n                );\n            });\n            this.setStateAsync(\n                `${this.name}.${this.instance}.info.system.electrolysis`,\n                sysInfo.isElectrolysis(),\n                true,\n            ).catch((e) => {\n                this.log.error(`Failed setting state for '${this.name}.${this.instance}.info.electrolysis': ${e}`);\n            });\n        }\n    }\n\n    private async setSysInfoObjectsNotExists(data: GetStateDataSysInfo): Promise<void> {\n        await this.setObjectNotExists(`${this.name}.${this.instance}.info.system`, {\n            type: 'channel',\n            common: {\n                name: 'SysInfo',\n            },\n            native: {},\n        });\n        for (const sysInfo of data.toArrayOfObjects()) {\n            await this.setObjectNotExists(`${this.name}.${this.instance}.info.system.${sysInfo.key}`, {\n                type: 'state',\n                common: {\n                    name: sysInfo.key,\n                    type: 'string',\n                    role: 'state',\n                    read: true,\n                    write: false,\n                },\n                native: {},\n            });\n        }\n\n        await this.setObjectNotExists(`${this.name}.${this.instance}.info.system.phPlusDosageEnabled`, {\n            type: 'state',\n            common: {\n                name: 'pH+ enabled',\n                type: 'boolean',\n                role: 'state',\n                read: true,\n                write: false,\n            },\n            native: {},\n        });\n\n        await this.setObjectNotExists(`${this.name}.${this.instance}.info.system.phMinusDosageEnabled`, {\n            type: 'state',\n            common: {\n                name: 'pH- enabled',\n                type: 'boolean',\n                role: 'state',\n                read: true,\n                write: false,\n            },\n            native: {},\n        });\n\n        await this.setObjectNotExists(`${this.name}.${this.instance}.info.system.chlorineDosageEnabled`, {\n            type: 'state',\n            common: {\n                name: 'CL enabled',\n                type: 'boolean',\n                role: 'state',\n                read: true,\n                write: false,\n            },\n            native: {},\n        });\n\n        await this.setObjectNotExists(`${this.name}.${this.instance}.info.system.electrolysis`, {\n            type: 'state',\n            common: {\n                name: 'Electrolysis',\n                type: 'boolean',\n                role: 'state',\n                read: true,\n                write: false,\n            },\n            native: {},\n        });\n    }\n\n    private async setStateDataObjectsNotExists(objects: GetStateDataObject[]): Promise<void> {\n        let lastObjCategory = '';\n        for (const obj of objects) {\n            if (lastObjCategory !== obj.category) {\n                await this.setObjectNotExists(`${this.name}.${this.instance}.${obj.category}`, {\n                    type: 'channel',\n                    common: {\n                        name: obj.category,\n                    },\n                    native: {},\n                });\n                lastObjCategory = obj.category;\n            }\n            this.setDataObjectNotExists(obj).catch((e) => {\n                this.log.error(`Failed setting objects for '${obj.label}': ${e}`);\n            });\n        }\n    }\n\n    private async setDataObjectNotExists(obj: GetStateDataObject): Promise<void> {\n        await this.setObjectNotExists(`${this.name}.${this.instance}.${obj.category}.${obj.categoryId}`, {\n            type: 'channel',\n            common: {\n                name: obj.label,\n            },\n            native: {},\n        });\n        for (const field of Object.keys(obj)) {\n            const common = {\n                name: obj.label,\n                type: typeof obj[field],\n                role: 'value',\n                read: true,\n                write: false,\n            } as ioBroker.StateCommon;\n\n            switch (field) {\n                case 'value':\n                    if (obj.category == String(GetStateCategory.TEMPERATURES)) {\n                        common.role = 'value.temperature';\n                        common.unit = `\u00B0${obj.unit}`;\n                        if (obj.active) {\n                            common.smartName = {\n                                de: obj.label,\n                                en: obj.label,\n                                smartType: 'THERMOSTAT',\n                            };\n                        }\n                    }\n                    break;\n                case 'category':\n                case 'label':\n                case 'unit':\n                case 'displayValue':\n                    common.role = 'text';\n                    break;\n                case 'active':\n                    common.role = 'indicator';\n                    break;\n                default:\n                    continue;\n            }\n\n            try {\n                await this.setObjectNotExists(`${this.name}.${this.instance}.${obj.category}.${obj.categoryId}.${field}`, {\n                    type: 'state',\n                    common: common,\n                    native: obj,\n                });\n            } catch (e: unknown) {\n                if (e instanceof Error) {\n                    this.log.error(`Failed setting object '${obj.label}': ${e.message}`);\n                } else {\n                    this.log.error(`Failed setting object '${obj.label}': ${String(e)}`);\n                }\n            }\n        }\n\n        if (\n            (obj.category as GetStateCategory) === GetStateCategory.RELAYS ||\n            ((obj.category as GetStateCategory) === GetStateCategory.EXTERNAL_RELAYS &&\n                this._stateData.sysInfo.isExtRelaysEnabled())\n        ) {\n            await this.setRelayDataObject(obj);\n        }\n    }\n\n    private async setRelayDataObject(obj: GetStateDataObject): Promise<void> {\n        const isLight = new RegExp('light|bulb|licht|leucht', 'i').test(obj.label);\n        const relayId = (obj.category === String(GetStateCategory.EXTERNAL_RELAYS) ? 8 : 0) + obj.categoryId;\n        const isDosageRelay = this._getStateService.data.isDosageControl(relayId);\n        const commonAuto = {\n            name: obj.label,\n            type: 'boolean',\n            role: 'switch.mode.auto',\n            read: true,\n            write: true,\n            smartName: obj.active\n                ? {\n                      de: `${obj.label} auto`,\n                      en: `${obj.label} auto`,\n                      smartType: isLight ? 'LIGHT' : 'SWITCH',\n                  }\n                : {},\n        } as ioBroker.StateCommon;\n        const commonOnOff = {\n            name: obj.label,\n            type: 'boolean',\n            role: isLight ? 'switch.light' : 'switch',\n            read: true,\n            write: !isDosageRelay,\n            smartName:\n                obj.active && !isDosageRelay\n                    ? {\n                          de: obj.label,\n                          en: obj.label,\n                          smartType: isLight ? 'LIGHT' : 'SWITCH',\n                      }\n                    : {},\n        } as ioBroker.StateCommon;\n\n        await this.setObjectNotExists(`${this.name}.${this.instance}.${obj.category}.${obj.categoryId}.auto`, {\n            type: 'state',\n            common: commonAuto,\n            native: obj,\n        });\n        await this.setObjectNotExists(`${this.name}.${this.instance}.${obj.category}.${obj.categoryId}.onOff`, {\n            type: 'state',\n            common: commonOnOff,\n            native: obj,\n        });\n\n        if (isDosageRelay) {\n            const commonDosageTimerState = {\n                name: obj.label,\n                type: 'number',\n                role: 'value.interval',\n                read: false,\n                write: true,\n            } as ioBroker.StateCommon;\n\n            await this.setObjectNotExists(`${this.name}.${this.instance}.${obj.category}.${obj.categoryId}.dosageTimer`, {\n                type: 'state',\n                common: commonDosageTimerState,\n                native: obj,\n            });\n        } else {\n            const commonGenericRelayTimerState = {\n                name: obj.label,\n                type: 'number',\n                role: 'value.interval',\n                read: false,\n                write: true,\n            } as ioBroker.StateCommon;\n\n            await this.setObjectNotExists(`${this.name}.${this.instance}.${obj.category}.${obj.categoryId}.timer`, {\n                type: 'state',\n                common: commonGenericRelayTimerState,\n                native: obj,\n            });\n        }\n    }\n\n    private setDataState(obj: GetStateDataObject): void {\n        for (const field of Object.keys(obj).filter((field) => this._objectStateFields.indexOf(field) > -1)) {\n            this.setStateAsync(\n                `${this.name}.${this.instance}.${obj.category}.${obj.categoryId}.${field}`,\n                obj[field] as ioBroker.StateValue,\n                true,\n            ).catch((e) => {\n                this.log.error(`Failed setting state for '${obj.label}': ${e}`);\n            });\n        }\n\n        if (\n            (obj.category as GetStateCategory) === GetStateCategory.RELAYS ||\n            ((obj.category as GetStateCategory) === GetStateCategory.EXTERNAL_RELAYS &&\n                this._stateData.sysInfo.isExtRelaysEnabled())\n        ) {\n            this.setRelayDataState(obj);\n        }\n    }\n\n    private setRelayDataState(obj: GetStateDataObject): void {\n        this.setStateAsync(\n            `${this.name}.${this.instance}.${obj.category}.${obj.categoryId}.auto`,\n            this._relayDataInterpreter.isAuto(obj),\n            true,\n        ).catch((e) => {\n            this.log.error(`Failed setting auto/manual switch state for '${obj.label}': ${e}`);\n        });\n        this.setStateAsync(\n            `${this.name}.${this.instance}.${obj.category}.${obj.categoryId}.onOff`,\n            this._relayDataInterpreter.isOn(obj),\n            true,\n        ).catch((e) => {\n            this.log.error(`Failed setting onOff switch state for '${obj.label}': ${e}`);\n        });\n    }\n\n    private async updateObjectCommonName(obj: GetStateDataObject): Promise<void> {\n        const objId = `${this.name}.${this.instance}.${obj.category}.${obj.categoryId}`;\n        const ioObj = await this.getObjectAsync(objId);\n        if (ioObj) {\n            ioObj.common.name = obj.label;\n            await this.setObject(objId, ioObj);\n        }\n        const objStates = await this.getStatesOfAsync(objId);\n        if (objStates) {\n            for (const state of objStates) {\n                state.common.name = obj.label;\n                await this.setObject(state._id, state);\n            }\n        }\n    }\n\n    private static isValidURL(url: string): boolean {\n        try {\n            new URL(url);\n            return true;\n        } catch {\n            return false;\n        }\n    }\n}\n\nif (require.main !== module) {\n    // Export the constructor in compact mode\n    module.exports = (options: Partial<AdapterOptions> | undefined) => new ProconIp(options);\n} else {\n    // otherwise start the instance directly\n    (() => new ProconIp())();\n}\n"],
  "mappings": ";AAAA,0BAAwC;AACxC,uBAYO;AAkBP,MAAM,iBAAiB,4BAAQ;AAAA,EAYpB,YAAY,UAAmC,CAAC,GAAG;AACtD,UAAM;AAAA,MACF,GAAG;AAAA,MACH,MAAM;AAAA,IACV,CAAC;AARL,SAAQ,gBAAgB;AACxB,SAAQ,qBAAqB,CAAC,SAAS,YAAY,SAAS,QAAQ,gBAAgB,QAAQ;AAC5F,SAAQ,WAAkC;AAOtC,SAAK,GAAG,SAAS,KAAK,QAAQ,KAAK,IAAI,CAAC;AACxC,SAAK,GAAG,UAAU,KAAK,SAAS,KAAK,IAAI,CAAC;AAC1C,SAAK,GAAG,eAAe,KAAK,cAAc,KAAK,IAAI,CAAC;AACpD,SAAK,eAAe,IAAI,MAAc;AACtC,SAAK,aAAa,IAAI,8BAAa;AAAA,EACvC;AAAA;AAAA;AAAA;AAAA,EAKA,MAAc,UAAyB;AACnC,QAAI,qBAAqB;AACzB,UAAM,KAAK,SAAS,mBAAmB,OAAO,IAAI;AAElD,QAAI,KAAK,OAAO,cAAc,SAAS,KAAK,CAAC,SAAS,WAAW,KAAK,OAAO,aAAa,GAAG;AACzF,WAAK,IAAI,KAAK,4BAA4B,KAAK,OAAO,aAAa,cAAc;AACjF;AAAA,IACJ;AAEA,UAAM,gBAAgB,OAAO,iBAAiB,OAAO,OAAO,KAAK,MAAM,GAAG;AAAA,MACtE,SAAS;AAAA,QACL,OAAO,KAAK,OAAO;AAAA,QACnB,UAAU;AAAA,MACd;AAAA,MACA,SAAS;AAAA,QACL,OAAO,KAAK,OAAO;AAAA,QACnB,UAAU;AAAA,MACd;AAAA,IACJ,CAAC;AACD,SAAK,wBAAwB,IAAI,sCAAqB,KAAK,GAAG;AAC9D,SAAK,mBAAmB,IAAI,iCAAgB,eAAyC,KAAK,GAAG;AAC7F,SAAK,mBAAmB,IAAI,iCAAgB,eAAe,KAAK,GAAG;AACnE,SAAK,oBAAoB,IAAI;AAAA,MAAiB;AAAA,MAAe,KAAK;AAAA,MAAK,KAAK;AAAA,MACxE,KAAK;AAAA,IAAqB;AAC9B,SAAK,kBAAkB,IAAI,gCAAe,eAAe,KAAK,GAAG;AAEjE,SAAK,IAAI,MAAM,wBAAwB,KAAK,iBAAiB,GAAG,EAAE;AAClE,SAAK,IAAI,MAAM,yBAAyB,KAAK,kBAAkB,GAAG,EAAE;AAEpE,UAAM,KAAK,iBAAiB,OAAO,EAAE,KAAK,OAAO,SAAS;AACtD,WAAK,aAAa;AAGlB,UAAI,CAAC,KAAK,eAAe;AACrB,aAAK,IAAI,MAAM,mCAAmC;AAClD,cAAM,KAAK,2BAA2B,KAAK,OAAO;AAClD,cAAM,KAAK,6BAA6B,KAAK,OAAO;AAAA,MACxD;AAAA,IACJ,CAAC;AAED,SAAK,WAAW,WAAW,MAAM;AAE7B,WAAK,iBAAiB;AAAA,QAClB,CAAC,SAAuB;AACpB,eAAK,IAAI,MAAM,mCAAmC;AAClD,+BAAqB;AAGrB,eAAK,QAAQ,iBAAiB,EAAE,QAAQ,CAAC,SAAS;AAE9C,gBAAI,CAAC,KAAK,iBAAiB,KAAK,UAAU,KAAK,WAAW,QAAQ,KAAK,GAAG,GAAG;AACzE,mBAAK,IAAI,MAAM,2BAA2B,KAAK,GAAG,KAAK,KAAK,KAAK,EAAE;AACnE,mBAAK;AAAA,gBACD,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ,gBAAgB,KAAK,GAAG;AAAA,gBACrD,KAAK,MAAM,SAAS;AAAA,gBACpB;AAAA,cACJ,EAAE,MAAM,CAAC,MAAM;AACX,qBAAK,IAAI,MAAM,6BAA6B,KAAK,GAAG,MAAM,CAAC,EAAE;AAAA,cACjE,CAAC;AAAA,YACL;AAAA,UACJ,CAAC;AAED,eAAK,4BAA4B,KAAK,OAAO;AAG7C,eAAK,QAAQ,QAAQ,CAAC,QAAQ;AAC1B,iBAAK,IAAI;AAAA,cACL,yCAAyC,IAAI,YAAY,UAAU,IAAI,KAAK,MAAM,IAAI,QAAQ;AAAA,YAClG;AACA,iBAAK,IAAI;AAAA,cACL,gDACI,KAAK,WAAW,cAAc,IAAI,EAAE,EAAE,KAC1C;AAAA,YACJ;AACA,iBAAK,IAAI,MAAM,cAAc,IAAI,KAAK,EAAE;AAGxC,kBAAM,sBAAsB,KAAK,aAAa,QAAQ,IAAI,EAAE;AAC5D,gBACI,CAAC,KAAK,iBACN,uBAAuB,KACtB,KAAK,WAAW,cAAc,IAAI,EAAE,KACjC,KAAK,WAAW,cAAc,IAAI,EAAE,EAAE,SAAS,IAAI,OACzD;AACE,kBAAI,KAAK,WAAW,cAAc,IAAI,EAAE,EAAE,SAAS,IAAI,OAAO;AAC1D,qBAAK,IAAI,MAAM,uBAAuB,IAAI,KAAK,MAAM,IAAI,QAAQ,GAAG;AACpE,qBAAK,uBAAuB,GAAG,EAAE,MAAM,CAAC,MAAe;AACnD,sBAAI,aAAa,OAAO;AACpB,yBAAK,IAAI,MAAM,4BAA4B,IAAI,KAAK,MAAM,EAAE,OAAO,EAAE;AAAA,kBACzE,OAAO;AACH,yBAAK,IAAI,MAAM,4BAA4B,IAAI,KAAK,MAAM,OAAO,CAAC,CAAC,EAAE;AAAA,kBACzE;AAAA,gBACJ,CAAC;AAAA,cACL;AACA,mBAAK,IAAI,MAAM,uBAAuB,IAAI,KAAK,MAAM,IAAI,QAAQ,GAAG;AACpE,mBAAK,aAAa,GAAG;AACrB,kBAAI,KAAK,aAAa,mBAAmB,GAAG;AACxC,qBAAK,aAAa,OAAO,qBAAqB,CAAC;AAAA,cACnD;AAAA,YACJ;AAAA,UACJ,CAAC;AAED,eAAK,IAAI,MAAM,0CAA0C;AACzD,eAAK,aAAa;AAClB,eAAK,gBAAgB;AACrB,eAAK,SAAS,mBAAmB,MAAM,IAAI,EAAE,MAAM,MAAM;AAAA,UAAC,CAAC;AAAA,QAC/D;AAAA,QACA,CAAC,MAAe;AArKhC;AAsKoB,eAAK,SAAS,mBAAmB,OAAO,IAAI,EAAE,MAAM,MAAM;AAAA,UAAC,CAAC;AAC5D,cAAI,CAAC,oBAAoB;AACrB,gBAAI,aAAa,OAAO;AACpB,mBAAK,IAAI,MAAM,wCAAwC,EAAE,OAAO,EAAE;AAAA,YACtE,OAAO;AACH,mBAAK,IAAI,MAAM,wCAAwC,OAAO,CAAC,CAAC,EAAE;AAAA,YACtE;AACA,uBAAK,qBAAL,mBAAuB;AAAA,UAC3B;AAAA,QACJ;AAAA,MACJ;AAAA,IACJ,GAAG,GAAG;AAEN,SAAK,gBAAgB,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ,WAAW;AAC7D,SAAK,gBAAgB,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ,mBAAmB;AAAA,EACzE;AAAA;AAAA,EAGQ,SAAS,UAA4B;AAxLjD;AAyLQ,QAAI;AAEA,iBAAK,qBAAL,mBAAuB;AACvB,WAAK,SAAS,mBAAmB,OAAO,IAAI,EAAE,MAAM,MAAM;AAAA,MAAC,CAAC;AAAA,IAChE,SAAS,GAAY;AACjB,WAAK,IAAI,MAAM,oCAAoC,OAAO,CAAC,CAAC,EAAE;AAAA,IAClE,UAAE;AACE,UAAI,KAAK,UAAU;AACf,qBAAa,KAAK,QAAQ;AAAA,MAC9B;AACA,eAAS;AAAA,IACb;AAAA,EACJ;AAAA;AAAA,EAGQ,cAAc,IAAY,OAAgD;AAC9E,QAAI,CAAC,OAAO;AAER,WAAK,IAAI,KAAK,SAAS,EAAE,UAAU;AACnC;AAAA,IACJ;AACA,QAAI,MAAM,KAAK;AAEX;AAAA,IACJ;AAEA,QAAI,GAAG,SAAS,OAAO,GAAG;AACtB,WAAK,gBAAgB,IAAI,KAAK,EAAE,MAAM,CAAC,MAAM;AACzC,aAAK,IAAI,MAAM,0BAA0B,EAAE,MAAM,CAAC,EAAE;AAAA,MACxD,CAAC;AAAA,IACL,WAAW,GAAG,SAAS,QAAQ,GAAG;AAC9B,WAAK,iBAAiB,IAAI,KAAK,EAAE,MAAM,CAAC,MAAM;AAC1C,aAAK,IAAI,MAAM,0BAA0B,EAAE,MAAM,CAAC,EAAE;AAAA,MACxD,CAAC;AAAA,IACL,WAAW,GAAG,SAAS,cAAc,GAAG;AACpC,WAAK,eAAe,IAAI,KAAK,EAAE,MAAM,CAAC,MAAM;AACxC,aAAK,IAAI,MAAM,2BAA2B,EAAE,MAAM,CAAC,EAAE;AAAA,MACzD,CAAC;AAAA,IACL,WAAW,GAAG,SAAS,QAAQ,GAAG;AAC9B,WAAK,cAAc,IAAI,KAAK,EAAE,MAAM,CAAC,MAAM;AACvC,aAAK,IAAI,MAAM,yBAAyB,EAAE,MAAM,CAAC,EAAE;AAAA,MACvD,CAAC;AAAA,IACL;AAAA,EACJ;AAAA,EAEA,MAAc,gBAAgB,UAAkB,OAAwC;AACpF,UAAM,aAAa,MAAM,KAAK,cAAc,SAAS,QAAQ,WAAW,QAAQ,CAAC;AACjF,QAAI,CAAC,YAAY;AACb,YAAM,IAAI,MAAM,qCAAqC,QAAQ,GAAG;AAAA,IACpE;AAEA,UAAM,MAAM,MAAM,KAAK,eAAe,QAAQ;AAC9C,QAAI,CAAC,KAAK;AACN,YAAM,IAAI,MAAM,uDAAuD,QAAQ,GAAG;AAAA,IACtF;AAEA,UAAM,qBAAyC,KAAK,WAAW,cAAc,OAAO,IAAI,OAAO,EAAE,CAAC;AAClG,SAAK,aAAa,KAAK,mBAAmB,EAAE;AAC5C,QAAI;AACA,UAAI,MAAM,KAAK;AACX,aAAK,IAAI,KAAK,aAAa,IAAI,OAAO,KAAK,QAAQ;AACnD,eAAO,KAAK,kBAAkB,QAAQ,kBAAkB;AAAA,MAC5D,WAAW,WAAW,KAAK;AACvB,aAAK,IAAI,KAAK,aAAa,IAAI,OAAO,KAAK,MAAM;AACjD,eAAO,KAAK,kBAAkB,MAAM,kBAAkB;AAAA,MAC1D,OAAO;AACH,aAAK,IAAI,KAAK,aAAa,IAAI,OAAO,KAAK,OAAO;AAClD,eAAO,KAAK,kBAAkB,OAAO,kBAAkB;AAAA,MAC3D;AAAA,IACJ,SAAS,GAAY;AACjB,UAAI,aAAa,OAAO;AACpB,aAAK,IAAI,MAAM,iCAAiC,EAAE,OAAO,EAAE;AAAA,MAC/D,OAAO;AACH,aAAK,IAAI,MAAM,iCAAiC,OAAO,CAAC,CAAC,EAAE;AAAA,MAC/D;AAEA,aAAO;AAAA,IACX;AAAA,EACJ;AAAA,EAEA,MAAc,iBAAiB,UAAkB,OAAsC;AACnF,UAAM,MAAM,MAAM,KAAK,eAAe,QAAQ;AAC9C,QAAI,CAAC,KAAK;AACN,YAAM,IAAI,MAAM,uDAAuD,QAAQ,GAAG;AAAA,IACtF;AAEA,UAAM,qBAAyC,KAAK,WAAW,cAAc,OAAO,IAAI,OAAO,EAAE,CAAC;AAClG,SAAK,aAAa,KAAK,mBAAmB,EAAE;AAC5C,QAAI;AACA,UAAI,MAAM,KAAK;AACX,aAAK,IAAI,KAAK,aAAa,IAAI,OAAO,KAAK,MAAM;AACjD,cAAM,KAAK,kBAAkB,MAAM,kBAAkB;AAAA,MACzD,OAAO;AACH,aAAK,IAAI,KAAK,aAAa,IAAI,OAAO,KAAK,OAAO;AAClD,cAAM,KAAK,kBAAkB,OAAO,kBAAkB;AAAA,MAC1D;AAAA,IACJ,SAAS,GAAY;AACjB,UAAI,aAAa,OAAO;AACpB,aAAK,IAAI,MAAM,iCAAiC,EAAE,OAAO,EAAE;AAAA,MAC/D,OAAO;AACH,aAAK,IAAI,MAAM,iCAAiC,OAAO,CAAC,CAAC,EAAE;AAAA,MAC/D;AAAA,IACJ;AAAA,EACJ;AAAA,EAEA,MAAc,eAAe,UAAkB,OAAsC;AACjF,UAAM,MAAM,MAAM,KAAK,eAAe,QAAQ;AAC9C,QAAI,CAAC,KAAK;AACN,YAAM,IAAI,MAAM,uDAAuD,QAAQ,GAAG;AAAA,IACtF;AAEA,UAAM,qBAAyC,KAAK,WAAW,cAAc,OAAO,IAAI,OAAO,EAAE,CAAC;AAClG,UAAM,UACF,mBAAmB,cAAc,mBAAmB,aAAa,OAAO,kCAAiB,eAAe,IAAI,IAAI;AACpH,SAAK,aAAa,KAAK,mBAAmB,EAAE;AAC5C,QAAI;AACA,YAAM,iBAAiB,MAAM;AAC7B,UAAI,YAAY,KAAK,WAAW,2BAA2B,GAAG;AAC1D,cAAM,KAAK,gBAAgB,kBAAkB,cAAc;AAAA,MAC/D,WAAW,YAAY,KAAK,WAAW,0BAA0B,GAAG;AAChE,cAAM,KAAK,gBAAgB,iBAAiB,cAAc;AAAA,MAC9D,WAAW,YAAY,KAAK,WAAW,yBAAyB,GAAG;AAC/D,cAAM,KAAK,gBAAgB,gBAAgB,cAAc;AAAA,MAC7D;AACA,WAAK,IAAI,KAAK,wBAAwB,IAAI,OAAO,KAAK,QAAQ,MAAM,GAAG,UAAU;AAAA,IACrF,SAAS,GAAY;AACjB,UAAI,aAAa,OAAO;AACpB,aAAK,IAAI,MAAM,+BAA+B,EAAE,OAAO,EAAE;AAAA,MAC7D,OAAO;AACH,aAAK,IAAI,MAAM,+BAA+B,OAAO,CAAC,CAAC,EAAE;AAAA,MAC7D;AAAA,IACJ;AAAA,EACJ;AAAA,EAEA,MAAc,cAAc,UAAkB,OAAsC;AAChF,UAAM,MAAM,MAAM,KAAK,eAAe,QAAQ;AAC9C,QAAI,CAAC,KAAK;AACN,YAAM,IAAI,MAAM,uDAAuD,QAAQ,GAAG;AAAA,IACtF;AAEA,UAAM,qBAAyC,KAAK,WAAW,cAAc,OAAO,IAAI,OAAO,EAAE,CAAC;AAClG,UAAM,UACF,mBAAmB,cAAc,mBAAmB,aAAa,OAAO,kCAAiB,eAAe,IAAI,IAAI;AACpH,SAAK,aAAa,KAAK,mBAAmB,EAAE;AAC5C,QAAI;AACA,YAAM,iBAAiB,MAAM;AAC7B,YAAM,KAAK,iBAAiB,SAAS,SAAS,cAAc;AAC5D,WAAK,IAAI,KAAK,qBAAqB,IAAI,OAAO,KAAK,OAAO,MAAM,GAAG,UAAU;AAAA,IACjF,SAAS,GAAY;AACjB,UAAI,aAAa,OAAO;AACpB,aAAK,IAAI,MAAM,8BAA8B,EAAE,OAAO,EAAE;AAAA,MAC5D,OAAO;AACH,aAAK,IAAI,MAAM,8BAA8B,OAAO,CAAC,CAAC,EAAE;AAAA,MAC5D;AAAA,IACJ;AAAA,EACJ;AAAA,EAEQ,4BAA4B,SAAoC;AACpE,QAAI,CAAC,KAAK,iBAAiB,QAAQ,kBAAkB,KAAK,WAAW,QAAQ,eAAe;AACxF,WAAK,IAAI,MAAM,mCAAmC;AAClD,WAAK;AAAA,QACD,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ;AAAA,QAC7B,QAAQ,sBAAsB;AAAA,QAC9B;AAAA,MACJ,EAAE,MAAM,CAAC,MAAM;AACX,aAAK,IAAI;AAAA,UACL,6BAA6B,KAAK,IAAI,IAAI,KAAK,QAAQ,sCAAsC,CAAC;AAAA,QAClG;AAAA,MACJ,CAAC;AACD,WAAK;AAAA,QACD,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ;AAAA,QAC7B,QAAQ,uBAAuB;AAAA,QAC/B;AAAA,MACJ,EAAE,MAAM,CAAC,MAAM;AACX,aAAK,IAAI;AAAA,UACL,6BAA6B,KAAK,IAAI,IAAI,KAAK,QAAQ,uCAAuC,CAAC;AAAA,QACnG;AAAA,MACJ,CAAC;AACD,WAAK;AAAA,QACD,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ;AAAA,QAC7B,QAAQ,wBAAwB;AAAA,QAChC;AAAA,MACJ,EAAE,MAAM,CAAC,MAAM;AACX,aAAK,IAAI;AAAA,UACL,6BAA6B,KAAK,IAAI,IAAI,KAAK,QAAQ,wCAAwC,CAAC;AAAA,QACpG;AAAA,MACJ,CAAC;AACD,WAAK;AAAA,QACD,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ;AAAA,QAC7B,QAAQ,eAAe;AAAA,QACvB;AAAA,MACJ,EAAE,MAAM,CAAC,MAAM;AACX,aAAK,IAAI,MAAM,6BAA6B,KAAK,IAAI,IAAI,KAAK,QAAQ,wBAAwB,CAAC,EAAE;AAAA,MACrG,CAAC;AAAA,IACL;AAAA,EACJ;AAAA,EAEA,MAAc,2BAA2B,MAA0C;AAC/E,UAAM,KAAK,mBAAmB,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ,gBAAgB;AAAA,MACvE,MAAM;AAAA,MACN,QAAQ;AAAA,QACJ,MAAM;AAAA,MACV;AAAA,MACA,QAAQ,CAAC;AAAA,IACb,CAAC;AACD,eAAW,WAAW,KAAK,iBAAiB,GAAG;AAC3C,YAAM,KAAK,mBAAmB,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ,gBAAgB,QAAQ,GAAG,IAAI;AAAA,QACtF,MAAM;AAAA,QACN,QAAQ;AAAA,UACJ,MAAM,QAAQ;AAAA,UACd,MAAM;AAAA,UACN,MAAM;AAAA,UACN,MAAM;AAAA,UACN,OAAO;AAAA,QACX;AAAA,QACA,QAAQ,CAAC;AAAA,MACb,CAAC;AAAA,IACL;AAEA,UAAM,KAAK,mBAAmB,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ,oCAAoC;AAAA,MAC3F,MAAM;AAAA,MACN,QAAQ;AAAA,QACJ,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,QACN,OAAO;AAAA,MACX;AAAA,MACA,QAAQ,CAAC;AAAA,IACb,CAAC;AAED,UAAM,KAAK,mBAAmB,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ,qCAAqC;AAAA,MAC5F,MAAM;AAAA,MACN,QAAQ;AAAA,QACJ,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,QACN,OAAO;AAAA,MACX;AAAA,MACA,QAAQ,CAAC;AAAA,IACb,CAAC;AAED,UAAM,KAAK,mBAAmB,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ,sCAAsC;AAAA,MAC7F,MAAM;AAAA,MACN,QAAQ;AAAA,QACJ,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,QACN,OAAO;AAAA,MACX;AAAA,MACA,QAAQ,CAAC;AAAA,IACb,CAAC;AAED,UAAM,KAAK,mBAAmB,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ,6BAA6B;AAAA,MACpF,MAAM;AAAA,MACN,QAAQ;AAAA,QACJ,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,QACN,OAAO;AAAA,MACX;AAAA,MACA,QAAQ,CAAC;AAAA,IACb,CAAC;AAAA,EACL;AAAA,EAEA,MAAc,6BAA6B,SAA8C;AACrF,QAAI,kBAAkB;AACtB,eAAW,OAAO,SAAS;AACvB,UAAI,oBAAoB,IAAI,UAAU;AAClC,cAAM,KAAK,mBAAmB,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ,IAAI,IAAI,QAAQ,IAAI;AAAA,UAC3E,MAAM;AAAA,UACN,QAAQ;AAAA,YACJ,MAAM,IAAI;AAAA,UACd;AAAA,UACA,QAAQ,CAAC;AAAA,QACb,CAAC;AACD,0BAAkB,IAAI;AAAA,MAC1B;AACA,WAAK,uBAAuB,GAAG,EAAE,MAAM,CAAC,MAAM;AAC1C,aAAK,IAAI,MAAM,+BAA+B,IAAI,KAAK,MAAM,CAAC,EAAE;AAAA,MACpE,CAAC;AAAA,IACL;AAAA,EACJ;AAAA,EAEA,MAAc,uBAAuB,KAAwC;AACzE,UAAM,KAAK,mBAAmB,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ,IAAI,IAAI,QAAQ,IAAI,IAAI,UAAU,IAAI;AAAA,MAC7F,MAAM;AAAA,MACN,QAAQ;AAAA,QACJ,MAAM,IAAI;AAAA,MACd;AAAA,MACA,QAAQ,CAAC;AAAA,IACb,CAAC;AACD,eAAW,SAAS,OAAO,KAAK,GAAG,GAAG;AAClC,YAAM,SAAS;AAAA,QACX,MAAM,IAAI;AAAA,QACV,MAAM,OAAO,IAAI,KAAK;AAAA,QACtB,MAAM;AAAA,QACN,MAAM;AAAA,QACN,OAAO;AAAA,MACX;AAEA,cAAQ,OAAO;AAAA,QACX,KAAK;AACD,cAAI,IAAI,YAAY,OAAO,kCAAiB,YAAY,GAAG;AACvD,mBAAO,OAAO;AACd,mBAAO,OAAO,OAAI,IAAI,IAAI;AAC1B,gBAAI,IAAI,QAAQ;AACZ,qBAAO,YAAY;AAAA,gBACf,IAAI,IAAI;AAAA,gBACR,IAAI,IAAI;AAAA,gBACR,WAAW;AAAA,cACf;AAAA,YACJ;AAAA,UACJ;AACA;AAAA,QACJ,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACD,iBAAO,OAAO;AACd;AAAA,QACJ,KAAK;AACD,iBAAO,OAAO;AACd;AAAA,QACJ;AACI;AAAA,MACR;AAEA,UAAI;AACA,cAAM,KAAK,mBAAmB,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ,IAAI,IAAI,QAAQ,IAAI,IAAI,UAAU,IAAI,KAAK,IAAI;AAAA,UACtG,MAAM;AAAA,UACN;AAAA,UACA,QAAQ;AAAA,QACZ,CAAC;AAAA,MACL,SAAS,GAAY;AACjB,YAAI,aAAa,OAAO;AACpB,eAAK,IAAI,MAAM,0BAA0B,IAAI,KAAK,MAAM,EAAE,OAAO,EAAE;AAAA,QACvE,OAAO;AACH,eAAK,IAAI,MAAM,0BAA0B,IAAI,KAAK,MAAM,OAAO,CAAC,CAAC,EAAE;AAAA,QACvE;AAAA,MACJ;AAAA,IACJ;AAEA,QACK,IAAI,aAAkC,kCAAiB,UACtD,IAAI,aAAkC,kCAAiB,mBACrD,KAAK,WAAW,QAAQ,mBAAmB,GACjD;AACE,YAAM,KAAK,mBAAmB,GAAG;AAAA,IACrC;AAAA,EACJ;AAAA,EAEA,MAAc,mBAAmB,KAAwC;AACrE,UAAM,UAAU,IAAI,OAAO,2BAA2B,GAAG,EAAE,KAAK,IAAI,KAAK;AACzE,UAAM,WAAW,IAAI,aAAa,OAAO,kCAAiB,eAAe,IAAI,IAAI,KAAK,IAAI;AAC1F,UAAM,gBAAgB,KAAK,iBAAiB,KAAK,gBAAgB,OAAO;AACxE,UAAM,aAAa;AAAA,MACf,MAAM,IAAI;AAAA,MACV,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM;AAAA,MACN,OAAO;AAAA,MACP,WAAW,IAAI,SACT;AAAA,QACI,IAAI,GAAG,IAAI,KAAK;AAAA,QAChB,IAAI,GAAG,IAAI,KAAK;AAAA,QAChB,WAAW,UAAU,UAAU;AAAA,MACnC,IACA,CAAC;AAAA,IACX;AACA,UAAM,cAAc;AAAA,MAChB,MAAM,IAAI;AAAA,MACV,MAAM;AAAA,MACN,MAAM,UAAU,iBAAiB;AAAA,MACjC,MAAM;AAAA,MACN,OAAO,CAAC;AAAA,MACR,WACI,IAAI,UAAU,CAAC,gBACT;AAAA,QACI,IAAI,IAAI;AAAA,QACR,IAAI,IAAI;AAAA,QACR,WAAW,UAAU,UAAU;AAAA,MACnC,IACA,CAAC;AAAA,IACf;AAEA,UAAM,KAAK,mBAAmB,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ,IAAI,IAAI,QAAQ,IAAI,IAAI,UAAU,SAAS;AAAA,MAClG,MAAM;AAAA,MACN,QAAQ;AAAA,MACR,QAAQ;AAAA,IACZ,CAAC;AACD,UAAM,KAAK,mBAAmB,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ,IAAI,IAAI,QAAQ,IAAI,IAAI,UAAU,UAAU;AAAA,MACnG,MAAM;AAAA,MACN,QAAQ;AAAA,MACR,QAAQ;AAAA,IACZ,CAAC;AAED,QAAI,eAAe;AACf,YAAM,yBAAyB;AAAA,QAC3B,MAAM,IAAI;AAAA,QACV,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,QACN,OAAO;AAAA,MACX;AAEA,YAAM,KAAK,mBAAmB,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ,IAAI,IAAI,QAAQ,IAAI,IAAI,UAAU,gBAAgB;AAAA,QACzG,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,QAAQ;AAAA,MACZ,CAAC;AAAA,IACL,OAAO;AACH,YAAM,+BAA+B;AAAA,QACjC,MAAM,IAAI;AAAA,QACV,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,QACN,OAAO;AAAA,MACX;AAEA,YAAM,KAAK,mBAAmB,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ,IAAI,IAAI,QAAQ,IAAI,IAAI,UAAU,UAAU;AAAA,QACnG,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,QAAQ;AAAA,MACZ,CAAC;AAAA,IACL;AAAA,EACJ;AAAA,EAEQ,aAAa,KAA+B;AAChD,eAAW,SAAS,OAAO,KAAK,GAAG,EAAE,OAAO,CAACA,WAAU,KAAK,mBAAmB,QAAQA,MAAK,IAAI,EAAE,GAAG;AACjG,WAAK;AAAA,QACD,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ,IAAI,IAAI,QAAQ,IAAI,IAAI,UAAU,IAAI,KAAK;AAAA,QACxE,IAAI,KAAK;AAAA,QACT;AAAA,MACJ,EAAE,MAAM,CAAC,MAAM;AACX,aAAK,IAAI,MAAM,6BAA6B,IAAI,KAAK,MAAM,CAAC,EAAE;AAAA,MAClE,CAAC;AAAA,IACL;AAEA,QACK,IAAI,aAAkC,kCAAiB,UACtD,IAAI,aAAkC,kCAAiB,mBACrD,KAAK,WAAW,QAAQ,mBAAmB,GACjD;AACE,WAAK,kBAAkB,GAAG;AAAA,IAC9B;AAAA,EACJ;AAAA,EAEQ,kBAAkB,KAA+B;AACrD,SAAK;AAAA,MACD,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ,IAAI,IAAI,QAAQ,IAAI,IAAI,UAAU;AAAA,MAC/D,KAAK,sBAAsB,OAAO,GAAG;AAAA,MACrC;AAAA,IACJ,EAAE,MAAM,CAAC,MAAM;AACX,WAAK,IAAI,MAAM,gDAAgD,IAAI,KAAK,MAAM,CAAC,EAAE;AAAA,IACrF,CAAC;AACD,SAAK;AAAA,MACD,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ,IAAI,IAAI,QAAQ,IAAI,IAAI,UAAU;AAAA,MAC/D,KAAK,sBAAsB,KAAK,GAAG;AAAA,MACnC;AAAA,IACJ,EAAE,MAAM,CAAC,MAAM;AACX,WAAK,IAAI,MAAM,0CAA0C,IAAI,KAAK,MAAM,CAAC,EAAE;AAAA,IAC/E,CAAC;AAAA,EACL;AAAA,EAEA,MAAc,uBAAuB,KAAwC;AACzE,UAAM,QAAQ,GAAG,KAAK,IAAI,IAAI,KAAK,QAAQ,IAAI,IAAI,QAAQ,IAAI,IAAI,UAAU;AAC7E,UAAM,QAAQ,MAAM,KAAK,eAAe,KAAK;AAC7C,QAAI,OAAO;AACP,YAAM,OAAO,OAAO,IAAI;AACxB,YAAM,KAAK,UAAU,OAAO,KAAK;AAAA,IACrC;AACA,UAAM,YAAY,MAAM,KAAK,iBAAiB,KAAK;AACnD,QAAI,WAAW;AACX,iBAAW,SAAS,WAAW;AAC3B,cAAM,OAAO,OAAO,IAAI;AACxB,cAAM,KAAK,UAAU,MAAM,KAAK,KAAK;AAAA,MACzC;AAAA,IACJ;AAAA,EACJ;AAAA,EAEA,OAAe,WAAW,KAAsB;AAC5C,QAAI;AACA,UAAI,IAAI,GAAG;AACX,aAAO;AAAA,IACX,QAAQ;AACJ,aAAO;AAAA,IACX;AAAA,EACJ;AACJ;AAEA,IAAI,QAAQ,SAAS,QAAQ;AAEzB,SAAO,UAAU,CAAC,YAAiD,IAAI,SAAS,OAAO;AAC3F,OAAO;AAEH,GAAC,MAAM,IAAI,SAAS,GAAG;AAC3B;",
  "names": ["field"]
}
